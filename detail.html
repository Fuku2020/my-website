<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>指标详情</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div id="detailPage">
            <a href="index.html" class="back-btn">↩ 返回列表</a>
            <div class="indicator-detail">
                <h2 id="detailTitle"></h2>
                <img id="detailImage" src="" alt="" class="indicator-thumbnail">
                <div id="detailContent"></div>
                <a href="#" id="detailDownload" class="download-btn">立即下载</a>
            </div>
        </div>
    </div>
    
        <!-- 挂件和二维码的容器 -->
    <div id="floatingWidget">
        <!-- 默认图标，例如微信卡片 -->
        <img id="widgetIcon" src="image/wechat.png" alt="Widget Icon"/>
        <!-- 添加的文字 -->
        <div id="widgetText">联系客服</div>
        <div id="qrCode" style="display:none;">
            <!-- 替换为你的二维码图片路径 -->
            <img src="image/ewm.png" alt="QR Code" class="qr-code-image"/>
        </div>
    </div>
    
    <script>
        // 加载指标详情
        async function loadIndicatorDetail() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');

            try {
                const response = await fetch('card.json'); // 加载 card.json
                const indicators = await response.json();
                const indicator = indicators.find(i => i.id === parseInt(id));

                if (indicator) {
                    document.getElementById('detailTitle').textContent = indicator.name;
                    document.getElementById('detailImage').src = indicator.image;
                    document.getElementById('detailContent').innerHTML = indicator.content;
                    document.getElementById('detailDownload').href = indicator.download;
                } else {
                    alert("未找到该指标！");
                }
            } catch (error) {
                console.error('数据加载失败:', error);
                alert('指标数据加载失败，请稍后重试！');
            }
        }

        // 初始化加载详情
        loadIndicatorDetail();
    </script>
    
     <script>
    document.addEventListener("DOMContentLoaded", function() {
        // 获取挂件和二维码元素
        var widget = document.getElementById('floatingWidget');
        var qrCode = document.getElementById('qrCode');
        var widgetIcon = document.getElementById('widgetIcon');

        if (widget && qrCode) { 
            // 鼠标进入事件监听器
            widget.addEventListener('mouseenter', function() {
                qrCode.style.display = 'block';
            });

            // 鼠标离开事件监听器
            widget.addEventListener('mouseleave', function() {
                qrCode.style.display = 'none';
            });
        }

        if (widgetIcon) { 
            // 点击微信图标事件监听器
            widgetIcon.addEventListener('click', function(event) {
                event.stopPropagation(); // 阻止冒泡，避免触发父级元素的鼠标移入事件
                // 替换为你的二维码图片路径
                var qrCodeImageUrl = "image/ewm.png";
                window.open(qrCodeImageUrl, '_blank'); // 在新标签页中打开二维码图片
            });
        }
    });
    </script>
</body>
</html>
